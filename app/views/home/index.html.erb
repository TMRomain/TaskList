<p>
    <a href="/home/addTask">
        Ajouter une tâche
    </a>
<p>
    Trier par :
    <div class="monthSelection">
        <%= button_to "Mois", update_selection_path(selection: "monthly"), method: :post %>
        <%= button_to "Terminer", update_selection_path(selection: "finished"), method: :post %>
        <%= button_to "A venir", update_selection_path(selection: "toCome"), method: :post %>
        <%= button_to "Toute", update_selection_path(selection: "all"), method: :post %>
    </div>
    <div class="monthSelection">
        <%= form_tag({ controller: "home", action: "previousMonth" }, method: :patch) do %>
            <%= button_tag type: "submit", class: "arrowLeft", onclick: "previousMonth(); return false;" do %>
                <%= image_tag("arrowLeft.png", alt: "Flèche gauche") %>
            <% end %>
        <% end %>
        
        <%= I18n.t('month_names')[@current_selected_month] %>
        
        <%= form_tag({ controller: "home", action: "nextMonth" }, method: :patch) do %>
            <%= button_tag type: "submit", class: "arrowRight", onclick: "nextMonth(); return false;" do %>
                <%= image_tag("arrowRight.png", alt: "Flèche droite") %>
            <% end %>
        <% end %>
  </div>

<div class="tasks">
<% @tasks.each do |task| %>
    <li>
        <div class="cardContent">
            <%= form_tag(update_task_path(id: task.id), method: :post) do %>
                <%= button_tag type: "submit", class: "updateButton", onclick: "redirectToUpdate(); return false;" do %>
                    <p class="task-date"><%= task.date.strftime("%d") %></p>
                    <h3 class="task-title"><%= task.title %></h3>
                    <p class="task-description"><%= task.desc %></p>
                    <div class="task-actions">
                        <% if task.iscompleted %>
                            <%= button_to "Marquer comme non terminée", { controller: "home", action: "changeState", id: task.id }, method: :changeState, disabled: true %>
                        <% else %>
                            <%= button_to "Marquer comme terminée", { controller: "home", action: "changeState", id: task.id }, method: :changeState %>
                        <% end %>
                <% end %>
            <% end %>
            <%= form_tag({ controller: "home", action: "delete", id: task.id },class: "deleteForm", method: :delete) do %>
                <%= button_tag type: "submit", class: "delete", onclick: "delete(); return false;" do %>
                    <%= image_tag("trashCan.png", alt: "Poubelle",class: "deleteImage") %>
                <% end %>
            <% end %>
        </div>
    </li>
<% end %>
</div>
